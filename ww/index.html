<!DOCTYPE html>
<html lang="ru">
<head>
<title>url book</title>
<!-- xd -->
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="description" content="xd url storage">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-config" content="https://xdiloc.github.io/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<!-- xd -->
<link rel="shortcut icon" href="https://xdiloc.github.io/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://xdiloc.github.io/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" sizes="180x180" href="https://xdiloc.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xdiloc.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://xdiloc.github.io/favicon-16x16.png">
<link rel="manifest" href="https://xdiloc.github.io/site.webmanifest">
<link rel="mask-icon" href="https://xdiloc.github.io/safari-pinned-tab.svg" color="#5bbad5">
<link rel="stylesheet" href="../assets/style/all.css" type="text/css">
<!-- xd -->
<style>
#out {
	width: 100%;
}

#out thead {
	color: #666;
	font-weight: bold;
	background-color: #eee;
}

#out tbody {
	color: #333;
}

#out td {
	border: 1px solid #aaa;
	padding: 8px;
	text-align: center;
}
</style>
</head>
<body>

<script>
function loadJSON(file, callback) {
	let xobj = new XMLHttpRequest();
	xobj.overrideMimeType('application/json');
	xobj.open('GET', file, true);
	xobj.onreadystatechange = function () {
		if (xobj.readyState == 4 && xobj.status == '200') {
			callback(JSON.parse(xobj.responseText));
		}
	};
	xobj.send(null);
}

function x_load() {
	let out = document.getElementById('out');
	let show = document.getElementById('show');
	out.innerHTML = '';
	loadJSON('https://xdiloc.github.io/ww/data.json', function(json) {
		let dd, cache = '';
		dd = json[show.value];
		if (dd === void 0) {
			out.innerHTML = '<tr><td>bad index</td></tr>';
			history.pushState("", document.title, window.location.pathname);
			return;
		}
		window.location.hash = '#' + show.value;
		for (let i = 0; i < dd.length; i++) {
			let newtab = '';
			if (dd[i]['newtab'] == '1') newtab = 'target=\"_blank\" ';
			cache += '<tr><td><a href=\"' + dd[i]['url'] + '\" ' + newtab + 'title=\"' + dd[i]['title'] + '\">' + dd[i]['name'] + '</a></td><td>' + dd[i]['description'] + '</td></tr>';
		}
		out.innerHTML = '<thead><tr><td>сайт</td><td>описание</td></tr></thead>' + cache;
	});
}
</script>

<div class="wrapper warp">
<div class="content warp">
<h2>url book</h2><hr />
<select id="show" onchange="x_load();">
<option value="xd">my projects</option>
<option value="webdev">web developer</option>
<option value="net">network</option>
<option value="device">device</option>
</select> Категория<br />
<table id="out"></table>
</div>
</div>

<script>
function x_hash() {
	let options = document.getElementById('show');
	let hh = window.location.hash.substring(1);
	let i = 0;
	while (i < options.length) {
		if (hh == options[i].value) {
			options.selectedIndex = i;
			break;
		}
		i++;
	}
	x_load();
}
window.onhashchange = x_hash();
</script>

<footer class="footer"><div class="we">
<a href="https://xdiloc.github.io/" title="главная страница">xdiloc.github.io</a>
<span> &starf; </span>
<a href="https://github.com/xdiloc/xdiloc.github.io" target="_blank" title="разработка">github.com</a>
</div></footer>

</body>
</html>
